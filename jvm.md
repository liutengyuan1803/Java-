一:JVM 运行区域划分：  
Java虚拟机在执行Java程序时，会把它所管理的内存划分为若干个不同的数据区域，这些区域有不同的用途，创建和销毁的时间，根据是否线程共享粗略的划分如下：  
jdk1.8:  
 ![image](https://github.com/liutengyuan1803/lean_repo/blob/master/images/2.jpg)  
线程私有：    
1.Java虚拟机栈：Java虚拟机栈是线程私有的，它的生命周期与线程相同，它描述的是Java方法执行的内存模型：每个方法在执行时，都会创建一个栈帧,用于存储局部变量表,操作数栈，动态链接，方法出口信息，每个方法从调用到执行完成，就对应着栈帧从Java虚拟机栈中的入栈和出栈操作  
  a、局部变量表：包含了方法执行过程中的所有变量。局部变量数组所需要的空间在编译期间完成分配，在方法运行期间不会改变局部变量数组的大小。  
  b、返回值：如果有返回值的话，压入调用者栈帧中的操作数栈中，并且把PC的值指向 方法调用指令 后面的一条指令地址。  
  c、操作数栈：操作变量的内存模型。操作数栈的最大深度在编译的时候已经确定（写入方法区code属性的max_stacks项中）。操作数栈的的元素可以是任意    Java类型，包括long和double，32位数据占用栈空间为1，64位数据占用2。方法刚开始执行的时候，栈是空的，当方法执行过程中，各种字节码指令往栈中存取数据。  
  d、动态链接：每个栈帧都持有在运行时常量池中该栈帧所属方法的引用，持有这个引用是为了支持方法调用过程中的动态链接。  
  2.本地方法栈(JNI) java虚拟机调用本地方法的入口。  
  3.程序计数器：记录字节码执行的行号，在多线程下记录代码执行的位置。  
共享区域：  
  4、堆（Heap）：Java对象存储的地方  
 （1）Java堆是虚拟机管理的内存中最大的一块  
 （2）Java堆是所有线程共享的区域  
 （3）在虚拟机启动时创建  
 （4）此内存区域的唯一目的就是存放对象实例，几乎所有对象实例都在这里分配内存。存放new生成的对象和数组  
 （5）Java堆是垃圾收集器管理的内存区域，因此很多时候称为“GC堆”   
  5.元空间 元空间包含jdk之前版本的方法区和运行时常量池
    方法区：方法区中存储有类的元数据信息，常量、静态变量、即时编译后的代码等数据  
    运行时常量池：  
    A、是方法区的一部分  
    B、存放编译期生成的各种字面量和符号引用  
    C、Class文件中除了存有类的版本、字段、方法、接口等描述信息，还有一项是常量池，存有这个类的 编译期生成的各种字面量和符号引用，这部分内容将在类加载后，
存放到方法区的运行时常量池中。  
  6.直接内存：  
  jdk1.4引入了NIO，它可以使用Native函数库直接分配堆外内存。（零拷贝 DirectByteBuffer）  
二：对象创建

  
  
  
